<ion-header class="bg-white shadow-none border-b border-gray-200">
  <div class="flex gap-2 items-center mx-3 my-2">
    <img 
      class="max-h-14 mx-auto"
      alt="logo PetPalooza" 
      src="assets/img/logo/PetPalooza.png" 
    />
  </div>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="px-3 py-5 bg-gray-50">
    <section class=" w-full mx-auto">
      <div class="w-full max-w-[570px] rounded-[20px] px-8 pt-4 text-center">
        <h1 class="pb-2 text-2xl md:text-3xl font-medium">Refugios / Fundaciones</h1>
        <span class="bg-blue-400 mx-auto mb-4 inline-block h-1 w-[90px] rounded"></span>
      </div>
      <!-- Refugios Card -->
      <section class="grid grid-cols-1 gap-y-6 mb-6">
        <article 
          *ngFor="let fundacion of fundaciones; let i = index"
          class="w-full rounded-3xl p-5 relative"
          [ngStyle]="{'background-color': colorsCards[i % colorsCards.length].bg}">
          <header class="">
            <h2 class="text-xl text-gray-600 font-bold mb-2 max-w-[78%]"> {{fundacion.nombre}} </h2>
            <p class="text-gray-500 text-sm max-w-[80%] sm:max-w-[85%]">
              {{fundacion.descripcion}}
            </p>
            <div class="flex items-center mt-4" [ngStyle]="{'color': colorsCards[i % colorsCards.length].text}">
              <svg  
                xmlns="http://www.w3.org/2000/svg"  
                width="24"  
                height="24" 
                viewBox="0 0 24 24"  
                fill="none"  
                stroke="currentColor"  
                stroke-width="2"  
                stroke-linecap="round"  
                stroke-linejoin="round"  
                class="h-6 w-6 flex-shrink-0 mr-1" 
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" />
                <path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z" />
              </svg>
              <span class="pt-1 text-sm">
                {{fundacion.ubicacion}}
              </span>
            </div>
          </header>
          <hr class="border-gray-300 my-3"/>
          <footer class="flex justify-center min-[338px]:justify-between items-center flex-wrap gap-y-1">
            <div class="flex items-center gap-1" [ngStyle]="{'color': colorsCards[i % colorsCards.length].text}">              
              <!-- <div *ngIf=""></div> -->
                <a (click)="refugio(fundacion.social.instagram)" rel="noopener noreferrer"  class="cursor-pointer">
                  <svg  
                  xmlns="http://www.w3.org/2000/svg" 
                  width="24"  
                  height="24"  
                  viewBox="0 0 24 24"  
                  fill="none"  
                  stroke="currentColor"
                  stroke-width="2"  
                  stroke-linecap="round"  
                  stroke-linejoin="round"  
                  class="h-7 w-7 flex-shrink-0 mr-1 hover:scale-105 duration-150">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z" />
                  <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                  <path d="M16.5 7.5l0 .01" />
                </svg>
               </a>
              <a (click)="refugio(fundacion.social.whatsApp)" rel="noopener noreferrer"  class="cursor-pointer">
                <svg  
                  xmlns="http://www.w3.org/2000/svg" 
                  width="24"  
                  height="24"  
                  viewBox="0 0 24 24"  
                  fill="none"  
                  stroke="currentColor"
                  stroke-width="2"  
                  stroke-linecap="round"  
                  stroke-linejoin="round"  
                  class="h-6 w-6 flex-shrink-0 mr-1 hover:scale-105 duration-150">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" />
                  <path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" />
                </svg>
               </a>
              <a (click)="refugio(fundacion.social.facebook)" rel="noopener noreferrer"  class="cursor-pointer">
                <svg  
                  xmlns="http://www.w3.org/2000/svg" 
                  width="24"  
                  height="24"  
                  viewBox="0 0 24 24"  
                  fill="none"  
                  stroke="currentColor"
                  stroke-width="2"  
                  stroke-linecap="round"  
                  stroke-linejoin="round"  
                  class="h-6 w-6 flex-shrink-0 mr-1 hover:scale-105 duration-150">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" />
                </svg>
               </a>

            </div>
            <div>
              <button (click)="refugio(fundacion.social.instagram)" class="p-1 px-3 text-white" [ngStyle]="{'color': colorsCards[i % colorsCards.length].text}">Seguir</button>
             </div>
          </footer>
          <section class="absolute top-4 right-4 flex justify-center items-center w-14 h-14 rounded-full drop-shadow-2xl-md bg-gradient-to-r from-[#F9C97C] to-[#A2E9C1]">
            <img class="w-16 hover:scale-110 duration-300 rounded-full drop-shadow-lg" [src]="fundacion.logo" />
            <!-- <svg viewBox="0 0 15 15" class="w-7 fill-gray-700">
              <path d="M7.5 0.875C5.49797 0.875 3.875 2.49797 3.875 4.5C3.875 6.15288 4.98124 7.54738 6.49373 7.98351C5.2997 8.12901 4.27557 8.55134 3.50407 9.31167C2.52216 10.2794 2.02502 11.72 2.02502 13.5999C2.02502 13.8623 2.23769 14.0749 2.50002 14.0749C2.76236 14.0749 2.97502 13.8623 2.97502 13.5999C2.97502 11.8799 3.42786 10.7206 4.17091 9.9883C4.91536 9.25463 6.02674 8.87499 7.49995 8.87499C8.97317 8.87499 10.0846 9.25463 10.8291 9.98831C11.5721 10.7206 12.025 11.8799 12.025 13.5999C12.025 13.8623 12.2376 14.0749 12.5 14.0749C12.7623 14.075 12.975 13.8623 12.975 13.6C12.975 11.72 12.4778 10.2794 11.4959 9.31166C10.7244 8.55135 9.70025 8.12903 8.50625 7.98352C10.0187 7.5474 11.125 6.15289 11.125 4.5C11.125 2.49797 9.50203 0.875 7.5 0.875ZM4.825 4.5C4.825 3.02264 6.02264 1.825 7.5 1.825C8.97736 1.825 10.175 3.02264 10.175 4.5C10.175 5.97736 8.97736 7.175 7.5 7.175C6.02264 7.175 4.825 5.97736 4.825 4.5Z">
              </path>
            </svg> -->
          </section>
        </article>
      </section>

    <!--ads local--> 
    <div id="myAds" class="grid grid-cols-3 gap-3 h-36 mb-12">
      <article class="relative bg-gray-200 w-full h-full sm:h-40 drop-shadow-xl" *ngFor="let imgs of img">
        <a [href]="imgs.web" target="_blank" rel="noopener noreferrer">
          <img [src]="imgs.img" alt="ad1" class="object-cover rounded-md w-full h-full">
        </a>
        <div class="group grid grid-cols-3 gap-0 duration-500 relative">
          <h1
            class="absolute z-10 cursor-pointer bottom-6 left-[40%]"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              height="24"
              width="24"
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
              class="w-7 h-7 text-blue-500 bg-gray-50 rounded-full p-2"
            >
              <path
                d="M5 7h14M5 12h14M5 17h14"
                stroke-width="2"
                stroke-linecap="round"
                stroke="currentColor"
              ></path>
            </svg>
          </h1>
          <div class="flex flex-row mx-2 sm:mx-10 md:mx-24 xl:mx-28 gap-1 opacity-0 group-hover:opacity-100 group-hover:translate-y-2 translate-y-6 transition-all duration-300">
            <a [href]="imgs.facebook" target="_blank" rel="noopener noreferrer">
              <ion-icon name="logo-facebook"
                class="w-4 h-4 p-2 bg-white/50 hover:bg-sky-500 backdrop-blur-md drop-shadow-lg flex justify-center items-center  text-blue-500 hover:text-white duration-200 rounded-full"
              ></ion-icon>
            </a>
            <a  [href]="imgs.instagram" target="_blank" rel="noopener noreferrer">
              <ion-icon name="logo-instagram"
                class="w-4 h-4 p-2 bg-white/50 hover:bg-sky-500 backdrop-blur-md drop-shadow-lg flex justify-center items-center  text-blue-500 hover:text-white duration-200 rounded-full"
              ></ion-icon>
            </a>
            <a [href]="imgs.whatsapp" target="_blank" rel="noopener noreferrer">
              <ion-icon name="logo-whatsapp"
                class="w-4 h-4 p-2 bg-white/50 hover:bg-sky-500 backdrop-blur-md drop-shadow-lg flex justify-center items-center  text-blue-500 hover:text-white duration-200 rounded-full"
              ></ion-icon>
            </a>
          </div>

        </div>
      </article>
    </div>
    <!-- <div id="myAds" class="grid grid-cols-3 gap-3 h-36">
      <article class="bg-gray-200 w-full h-full rounded-lg overflow-hidden" *ngFor="let imgs of img">
        <a [href]="imgs.instagram" target="_blank" rel="noopener noreferrer">
          <img [src]="imgs.img" alt="ad1" class="object-cover w-full h-full">
        </a>
      </article>
    </div> -->
      <div class="my-3 mt-24">
        <div class="w-full max-w-[570px] rounded-[20px] px-3 pt-4 text-start">
          <ng-container *ngIf="texto1showSkeleton; else contenidoPerro">
            <!-- Skeleton Loader -->
            <div class="skeleton-heading pb-2">
              <ion-skeleton-text [animated]="true" style="width:100%;"></ion-skeleton-text>
            </div>
          </ng-container>
          <ng-template #contenidoPerro>
            <!-- Contenido real -->
            <!-- <h1 class="pb-2 text-2xl font-medium">Animales en Adopcion</h1> -->
            <img class="w-full h-full object-cover max-w-[340px] pb-2" src="../../assets/img/huachitos/Logo-Huachitos.svg" alt="Imagen de Raza"/>
          </ng-template>
          <span class="bg-green-600 mx-auto mb-2 inline-block h-1 w-[90px] rounded"></span>
        </div>
        <swiper-container [slidesPerView]="1.3" [loop]="false" *ngIf="!mostrarError500">
          <swiper-slide *ngFor="let animales of huachito;let i = index">
            <ng-container *ngIf="!showSkeletonPerros; else skeletonContent">
              <div class="px-3">
                <div class="w-full min-h-96 bg-white rounded-3xl p-4 flex flex-col items-start justify-between gap-3 border border-gray-200">
                  <div class="w-full">
                    <div class="w-full h-52 rounded-2xl overflow-hidden relative">
                      <ion-img class="w-full h-full object-cover object-top" [src]="animales.imagen" alt="Imagen de Raza" (click)="openModal(animales.imagen)"></ion-img>
                      <div class="absolute top-3 right-3 w-10 h-10 rounded-full bg-white flex justify-center items-center text-red-400">
                        <img src="../../assets/img/huachitos/isotipo-huachitos-beta.svg" class="w-full"/>                     
                      </div>
                    </div>
                    <div class="mt-3 flex flex-row justify-between">
                      <div class="">
                        <p class="text-xl text-gray-900 font-extrabold">{{ animales.nombre }}</p>
                        <p class="text-md text-gray-400 mb-2">{{animales.genero}}</p>
                        <p class="text-gray-700">{{animales.comuna }}</p>
                      </div>
                      <div>
                        <small class="text-gray-800 text-center">{{animales.edad}}</small>
                      </div>       
                    </div>
                  </div>
                  <div class="flex justify-between w-full flex-wrap">
                    <ion-button fill="clear" class="text-white px-1 rounded-xl bg-green-500 hover:bg-green-600 transition-colors" (click)=" adoptar(animales.url)" >Adoptar</ion-button>
                    <!-- <ion-button fill="clear" class="text-white px-1 rounded-xl bg-green-500 hover:bg-green-600 transition-colors" (click)=" adoptar(animales.url)" >Ver Detalles</ion-button>  -->
                  </div>
                </div>
              </div>
            </ng-container>
          </swiper-slide>
          <ng-template #skeletonContent>
            <div class="px-3">
              <div class="w-full h-96 bg-gray-100 rounded-3xl p-4 flex flex-col items-start justify-between gap-3 border border-gray-200 animate-pulse">
                <div class="w-full">
                  <div class="w-full h-52 rounded-2xl bg-gray-300"></div>
                  <div class="mt-3">
                    <div class="h-4 bg-gray-300 rounded w-3/4"></div>
                    <div class="h-3 bg-gray-300 rounded w-1/2 mt-2"></div>
                  </div>
                </div>
                <div class="h-8 bg-gray-300 rounded w-24 mt-4"></div>
              </div>
            </div>
          </ng-template>
        </swiper-container>  
      </div>
       <!-- Error message for 500 status -->
       <div *ngIf="mostrarError500" class="mt-4">
        <swiper-slide>
          <ng-container >
            <div class="px-3">
              <div class="w-full min-h-96 bg-white rounded-3xl p-4 flex flex-col items-start justify-between gap-3 border border-gray-200">
                <div class="w-full">
                  <div class="w-full h-60 rounded-2xl overflow-hidden relative">
                    <ion-img class="w-56 h-auto md:w-full md:h-full object-cover mx-20" src="../../assets/icon/warning.png" alt="Warning"></ion-img>
                    <div class="absolute top-3 right-3 w-10 h-10 rounded-full bg-white flex justify-center items-center text-red-400">
                      <img src="../../assets/img/huachitos/isotipo-huachitos-beta.svg" class="w-full"/>                     
                    </div>
                  </div>
                  <div class="mt-3">
                    <p class="text-gray-900 font-semibold  text-xl text-center">
                      Nuestros perros y gatos están de fiesta! Volverán pronto. 🎉🐶🐱
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
        </swiper-slide>
      </div>
      <small class="flex justify-center text-xs mx-1 mt-2 sm:mt-5 md:mt-6 text-center">Agradecimiento a <a (click)="verWeb(webUrl)" class="text-green-500 ml-1"> Huachitos.cl</a></small>
    </section>
  </div>
</ion-content>
