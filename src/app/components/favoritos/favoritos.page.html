<!-- <ion-header mode="md">
</ion-header> -->
<ion-content mode="md">
  <ion-toolbar class="border-b border-gray-200">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <div class="flex items-center justify-center">
      <img 
        class="max-h-14 my-1"
        alt="logo PetPalooza" 
        src="assets/img/logo/PetPalooza.png" 
      />
    </div>
  </ion-toolbar>
  <div class="bg-white">
    <div class="w-full max-w-[570px] rounded-[20px] px-3 pt-4 text-start flex flex-col justify-start">
      <h1 class="pb-2 text-2xl font-medium">Categorías</h1>
      <span class="bg-blue-400 inline-block h-1 w-[90px] rounded"></span>
    </div>

    <!-- Skeleton Categories -->
    <div *ngIf="isLoading; else categoriesLoaded" class="grid grid-cols-2 md:grid-cols-3 max-w-[900px] mx-auto gap-5 py-3 w-full px-2">
      <div *ngFor="let item of skeletonCategories" class="rounded-xl overflow-hidden border border-gray-100 p-3">
        <div class="bg-gray-200 h-8 w-8 rounded-full mb-3"></div>
        <div class="h-4 bg-gray-200 rounded mb-2"></div>
        <div class="h-4 bg-gray-200 w-1/2 rounded"></div>
      </div>
    </div>

    <!-- Categories Content -->
    <ng-template #categoriesLoaded>
      <div class="grid grid-cols-2 md:grid-cols-3 max-w-[900px] mx-auto gap-5 py-3 w-full px-2">
        <!-- Category Items -->
        <article class="rounded-xl overflow-hidden border border-gray-100 relative flex transition-all duration-300 hover:bg-gray-100/30">
          <div class="p-2">
            <div class="flex justify-center items-center bg-blue-100 text-blue-400 p-2 rounded-full">
              <!-- Icon SVG -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" height="28" width="28" fill="currentColor" class="">
                <path d="M320 192h17.1c22.1 38.3 63.5 64 110.9 64c11 0 21.8-1.4 32-4v4 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V339.2L280 448h56c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-53 0-96-43-96-96V192.5c0-16.1-12-29.8-28-31.8l-7.9-1c-17.5-2.2-30-18.2-27.8-35.7s18.2-30 35.7-27.8l7.9 1c48 6 84.1 46.8 84.1 95.3v85.3c34.4-51.7 93.2-85.8 160-85.8zm160 26.5v0c-10 3.5-20.8 5.5-32 5.5c-28.4 0-54-12.4-71.6-32h0c-3.7-4.1-7-8.5-9.9-13.2C357.3 164 352 146.6 352 128v0V32 12 10.7C352 4.8 356.7 .1 362.6 0h.2c3.3 0 6.4 1.6 8.4 4.2l0 .1L384 21.3l27.2 36.3L416 64h64l4.8-6.4L512 21.3 524.8 4.3l0-.1c2-2.6 5.1-4.2 8.4-4.2h.2C539.3 .1 544 4.8 544 10.7V12 32v96c0 17.3-4.6 33.6-12.6 47.6c-11.3 19.8-29.6 35.2-51.4 42.9zM432 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"/>
              </svg>
            </div>
          </div>
          <div class="flex flex-col justify-center">
            <h1 class="text-gray-700 font-medium">Felinos</h1>
            <div class="flex items-end text-gray-400 mt-1">
              <!-- Additional Info -->
            </div>
          </div>
        </article>
        <article class="rounded-xl overflow-hidden border border-gray-100 relative flex transition-all duration-300 hover:bg-gray-100/30">
          <div class="p-2">
            <div class="flex justify-center items-center bg-yellow-100 text-yellow-400 p-2 rounded-full">
              <!-- Icon SVG -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" height="28" width="28" fill="currentColor" class="">
                <path d="M309.6 158.5L332.7 19.8C334.6 8.4 344.5 0 356.1 0c7.5 0 14.5 3.5 19 9.5L392 32h52.1c12.7 0 24.9 5.1 33.9 14.1L496 64h56c13.3 0 24 10.7 24 24v24c0 44.2-35.8 80-80 80H464 448 426.7l-5.1 30.5-112-64zM416 256.1L416 480c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V364.8c-24 12.3-51.2 19.2-80 19.2s-56-6.9-80-19.2V480c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V249.8c-28.8-10.9-51.4-35.3-59.2-66.5L1 167.8c-4.3-17.1 6.1-34.5 23.3-38.8s34.5 6.1 38.8 23.3l3.9 15.5C70.5 182 83.3 192 98 192h30 16H303.8L416 256.1zM464 80a16 16 0 1 0 -32 0 16 16 0 1 0 32 0z"/>
              </svg>
            </div>
          </div>
          <div class="flex flex-col justify-center">
            <h1 class="text-gray-700 font-medium">Canino</h1>
            <div class="flex items-end text-gray-400 mt-1">
              <!-- Additional Info -->
            </div>
          </div>
        </article>
      </div>
    </ng-template>

    <div class="w-full max-w-[570px] rounded-[20px] px-3 pt-4 text-start flex flex-col justify-start">
      <h1 class="pb-2 text-2xl font-medium">Favoritos</h1>
      <span class="bg-blue-400 inline-block h-1 w-[90px] rounded"></span>
    </div>

    <!-- Skeleton for Favorites -->
    <div *ngIf="isLoading; else favoritesLoaded" class="grid grid-cols-2 md:grid-cols-3 max-w-[900px] mx-auto gap-5 py-3 w-full px-2">
      <div *ngFor="let item of skeletonFavorites" class="rounded-xl overflow-hidden border border-gray-100 p-3">
        <div class="bg-gray-200 h-40 w-full mb-2"></div>
        <div class="h-4 bg-gray-200 rounded mb-2"></div>
        <div class="h-4 bg-gray-200 w-1/2 rounded"></div>
      </div>
    </div>

    <!-- Favorites Content -->
    <ng-template #favoritesLoaded>
      <ng-container *ngIf="favoriteAnimals.length > 0; else noFavorites">
        <div class="grid grid-cols-2 md:grid-cols-2 max-w-[800px] mx-auto gap-5 py-3 w-full px-2">
          <article class="rounded-xl overflow-hidden border border-gray-100 relative shadow-lg" *ngFor="let animal of favoriteAnimals">
            <!-- Content for each favorite animal -->
            <img class="w-full object-cover object-top max-h-40" alt="Imagen de {{ animal.Raza }}" [src]="animal.imgPerfil" />
            <div class="absolute top-4 right-5 md:top-5 md:right-8 w-10 h-10 rounded-full bg-white flex justify-center items-center text-red-400">
              <button type="button" 
                [class.animate]="isInFavorites(animal, animal.type)"
                [class.animate-pulse]="!isInFavorites(animal, animal.type)" 
                (click)="toggleFavorite(animal, animal.type)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-8 h-8 md:w-10 md:h-10">
                  <path d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"/>
                </svg>
              </button>
            </div>            
            <div class="p-3">
              <span [ngClass]="{
                'bg-blue-100': animal.type !== 'perro',
                'bg-yellow-100': animal.type === 'perro',
                'text-blue-700': animal.type !== 'perro',
                'text-yellow-400': animal.type === 'perro'
              }"
                class="text-xs font-medium me-2 px-2.5 py-0.5 rounded-full">
                 {{ animal.type === 'perro' ? 'Canino' : (animal.type === 'gato' ? 'Felino' : animal.type) }}
              </span>
        
              <h1 class="text-gray-700 font-medium my-2">{{ animal.Raza }}</h1>
              <div class="flex items-end text-gray-400 my-2">
                <!-- Home Icon SVG -->
                <p class="font-medium text-sm px-1">{{ animal.Origen }}</p>
              </div>
              <div class="flex justify-center" (click)="navigateToAnimalProfile(animal)">
                <a class="text-sm font-medium text-blue-400 hover:underline text-center">Ver Perfil</a>
              </div>
            </div>
          </article>
        </div>
      </ng-container>
    </ng-template>
    
    <ng-template #noFavorites>
      <div class="flex flex-col items-center justify-center text-center py-10">
        <img src="../../../assets/img/Clipart heart.jpeg" alt="Corazón" class="w-20 h-20 mb-4">
        <h2 class="text-xl font-semibold text-gray-700">Aún no tienes mascotas favoritas</h2>
        <p class="text-gray-500 mt-2">Agrega tus mascotas favoritas y encuéntralos más rápido aquí.</p>
      </div>
    </ng-template>
  </div>
</ion-content>
